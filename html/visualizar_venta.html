<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Visualizar Ventas - King's Pizza</title>
    
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/menu_principal.css">
    <link rel="stylesheet" href="../css/visualizar_venta.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Contenedor Principal -->
        <div class="venta-visualizar-container">
            <!-- Header con Título y Fecha/Hora -->
            <div class="venta-visualizar-header">
                <div class="venta-visualizar-header-left">
                    <h1 class="venta-visualizar-titulo">Visualizar Ventas</h1>
                </div>
                <div class="venta-visualizar-header-right">
                    <div class="fecha-hora-display">
                        <span id="fechaActual"></span>
                        <span id="horaActual"></span>
                    </div>
                </div>
            </div>

            <!-- Búsqueda de Ventas -->
            <div class="busqueda-section">
                <div class="busqueda-form">
                    <input 
                        type="text" 
                        id="campoBusqueda" 
                        class="input-busqueda-principal" 
                        placeholder="Buscar venta..."
                    >
                    
                    <button class="btn-buscar-principal" onclick="buscarVenta()">
                        BUSCAR
                    </button>
                    
                    <button class="btn-detalle-principal" onclick="mostrarDetalle()" disabled id="btnDetalle">
                        DETALLE
                    </button>
                </div>
            </div>

            <!-- Tabla de Ventas -->
            <div class="tabla-ventas-section">
                <div class="tabla-ventas-wrapper">
                    <table class="tabla-ventas-principal">
                        <thead>
                            <tr>
                                <th>Nro COMPROBANTE</th>
                                <th>FECHA</th>
                                <th>CLIENTE</th>
                                <th>TOTAL</th>
                                <th>Tipo Pago</th>
                            </tr>
                        </thead>
                        <tbody id="tbodyVentas">
                            <!-- Las filas se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Botones de Acción -->
            <div class="acciones-principales">
                <button class="btn-action btn-exportar" onclick="exportarVentas()">
                    <i class="fas fa-file-export"></i> Exportar
                </button>
                <button class="btn-action btn-salir" onclick="salir()">
                    <i class="fas fa-times"></i> Salir
                </button>
            </div>
        </div>
    </main>

    <!-- Modal de detalle de venta -->
    <div id="modalDetalle" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-file-invoice"></i> Comprobante de Pago</h2>
                <button class="btn-close" onclick="cerrarModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="comprobante">
                <div class="comprobante-header">
                    <div class="empresa-info">
                        <h3><i class="fas fa-pizza-slice"></i> KING'S PIZZA</h3>
                        <p>RUC: 20123456789</p>
                        <p>Av. Principal 123, Lima - Perú</p>
                        <p>Tel: (01) 234-5678</p>
                    </div>
                    <div class="comprobante-numero">
                        <h4>BOLETA DE VENTA</h4>
                        <p>N° <span id="detalleNroComprobante">001-0001</span></p>
                    </div>
                </div>

                <div class="comprobante-info">
                    <div class="info-row">
                        <span class="label">Fecha:</span>
                        <span id="detalleFecha" class="value">--/--/----</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Hora:</span>
                        <span id="detalleHora" class="value">--:--:--</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Cliente:</span>
                        <span id="detalleCliente" class="value">-----------</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Tipo de Pago:</span>
                        <span id="detalleTipoPago" class="value">-----------</span>
                    </div>
                </div>

                <div class="comprobante-productos">
                    <table class="tabla-detalle">
                        <thead>
                            <tr>
                                <th>Producto</th>
                                <th>Cant.</th>
                                <th>Precio</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="tablaDetalleProductos">
                            <!-- Se llenará dinámicamente -->
                        </tbody>
                    </table>
                </div>

                <div class="comprobante-totales">
                    <div class="total-row">
                        <span class="label">Subtotal:</span>
                        <span id="detalleSubtotal" class="value">S/ 0.00</span>
                    </div>
                    <div class="total-row">
                        <span class="label">IGV (18%):</span>
                        <span id="detalleIGV" class="value">S/ 0.00</span>
                    </div>
                    <div class="total-row total-final">
                        <span class="label">TOTAL:</span>
                        <span id="detalleTotal" class="value">S/ 0.00</span>
                    </div>
                </div>

                <div class="comprobante-footer">
                    <p>¡Gracias por su compra!</p>
                    <p>Vuelva pronto</p>
                </div>

                <div class="modal-acciones">
                    <button class="btn-modal btn-imprimir" onclick="imprimirComprobante()">
                        <i class="fas fa-print"></i> Imprimir
                    </button>
                    <button class="btn-modal btn-pdf" onclick="descargarPDF()">
                        <i class="fas fa-file-pdf"></i> Descargar PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../js/load_sidebar.js"></script>
    <script src="../js/menu_principal.js"></script>
    <script src="../js/visualizar_venta.js"></script>
</body>
</html>